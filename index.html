<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Interactiva Medicina</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f7f7f7; }
    h1 { text-align: center; margin-bottom: 30px; }
    .semestre { margin-bottom: 40px; }
    .semestre h2 { background: #1565c0; color: white; padding: 10px; border-radius: 4px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px,1fr)); gap: 12px; padding: 10px; background: white; border: 1px solid #ddd; border-radius: 6px; }
    .curso { padding: 12px; border: 1px solid #ccc; border-radius: 6px; text-align: center; cursor: pointer; transition: background 0.3s; }
    .curso.aprobado { background: #aed581; text-decoration: line-through; }
    .curso.bloqueado { background: #eeeeee; color: #999; cursor: not-allowed; }
    .curso:hover:not(.bloqueado):not(.aprobado) { background: #c5e1a5; }
  </style>
</head>
<body>
  <h1>Malla Interactiva Medicina</h1>

  <div id="contenedor"></div>

  <script>
    const ramos = [
      { id: 1, nombre: "Bases Científicas I", prereqs: [], semestre: 1 },
      { id: 7, nombre: "Bases Científicas III", prereqs: [1], semestre: 2 },
      { id: 13, nombre: "Bases Científicas IV", prereqs: [7], semestre: 3 },
      { id: 15, nombre: "Patología y Anatomía Patológica", prereqs: [13], semestre: 3 },
      { id: 19, nombre: "Fisiopatología", prereqs: [15], semestre: 4 },
      // ... agrega más ramos con su número, nombre, prereqs y semestre real
    ];

    const estado = {};

    function puedeActivarse(ramo) {
      if (ramo.prereqs.length === 0) return true;
      return ramo.prereqs.every(id => estado[id]);
    }

    function render() {
      const cont = document.getElementById("contenedor");
      cont.innerHTML = "";
      const semestres = [...new Set(ramos.map(r => r.semestre))].sort((a,b)=>a-b);
      semestres.forEach(num => {
        const divs = document.createElement("div");
        divs.classList.add("semestre");
        const h2 = document.createElement("h2");
        h2.textContent = `Semestre ${num}`;
        divs.appendChild(h2);
        const grid = document.createElement("div");
        grid.classList.add("grid");
        ramos.filter(r=>r.semestre===num).forEach(ramo => {
          const d = document.createElement("div");
          d.classList.add("curso");
          d.textContent = `#${ramo.id} – ${ramo.nombre}`;
          const activo = puedeActivarse(ramo);
          if (estado[ramo.id]) d.classList.add("aprobado");
          else if (!activo) d.classList.add("bloqueado");
          d.onclick = () => {
            if (!activo && !estado[ramo.id]) return;
            estado[ramo.id] = !estado[ramo.id];
            render();
          };
          grid.appendChild(d);
        });
        divs.appendChild(grid);
        cont.appendChild(divs);
      });
    }

    render();
  </script>
</body>
</html>
